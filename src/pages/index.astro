---
/**
 * 个人博客首页
 * 使用 React 组件渲染
 */
import Blog from '../components/Blog';
import BaseLayout from '../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// 获取最近的三篇文章
const posts = await getCollection('blog');
const recentPosts = posts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3)
  .map(post => ({
    slug: post.slug,
    title: post.data.title,
    excerpt: post.data.description,
    date: post.data.pubDate.toISOString().split('T')[0],
    tag: post.data.tags?.[0] || '文章',
  }));
---

<BaseLayout title="DESIGNER.BLOG" description="极简风格的个人博客">
  <Blog client:load posts={recentPosts} />
</BaseLayout>
