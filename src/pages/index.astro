---
/**
 * 个人博客首页
 * 使用 React 组件渲染
 */
import Blog from '../components/Blog';
import '../styles/global.css';
import { getCollection } from 'astro:content';

// 获取最近的三篇文章
const posts = await getCollection('blog');
const recentPosts = posts
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3)
  .map(post => ({
    slug: post.slug,
    title: post.data.title,
    excerpt: post.data.description,
    date: post.data.pubDate.toISOString().split('T')[0],
    tag: post.data.tags?.[0] || '文章',
  }));
---

<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="极简风格的个人博客" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <title>DESIGNER.BLOG</title>
  </head>
  <body>
    <Blog client:load posts={recentPosts} />
  </body>
</html>
